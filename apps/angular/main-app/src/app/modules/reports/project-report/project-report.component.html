<div class="project-report container-wrapper">
    <mat-card>
        <div class="workspace-blk workspace-border">
            <strong>Project Reports</strong>
        </div>

        <div class="project-report-form">
            <!-- Project Selection -->
            <main-app-project-selection [projectList]="projectSelectionInputList" [selctedProjects]="selectedProjects" (getSelectedProjects)="getSelectedProjectList($event)" [isInProjectReport]="true" [ngClass]="selectedProjects !== null && selectedProjects?.length === 0 ? 'required-error' : ''"
                class="close-right">
            </main-app-project-selection>

            <!-- From Month Picker -->
            <div class="close-icon-wrapper input-close-wrapper">
                <mat-form-field class="small-dropdown medium-height-wrapper" [ngClass]="[!fromMonthControl.value || fromMonthControl.errors ? 'required-error' : '', fromMonthControl.value ? '' : 'calender-icon']">
                    <!-- <mat-label class="filterLabel">From</mat-label> -->
                    <input matInput placeholder="From" [matDatepicker]="fromMonthPicker" [formControl]="fromMonthControl" (click)="fromMonthPicker.open()" autocomplete="off" [matDatepickerFilter]="myFilter" readonly />

                    <mat-datepicker-toggle matPrefix [for]="fromMonthPicker"></mat-datepicker-toggle>
                    <mat-datepicker #fromMonthPicker startView="multi-year" (monthSelected)="setMonthAndYear($event, fromMonthPicker, 0)" panelClass="example-month-picker"></mat-datepicker>
                    <!-- <mat-icon matSuffix class="filter-close" (click)="fromMonthControl.reset(); getProjectReport()" *ngIf="fromMonthControl.value"
          >close</mat-icon
        > -->
                </mat-form-field>
                <svg (click)="fromMonthControl.reset(); getProjectReport()" *ngIf="fromMonthControl.value" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="filter-close">
          <path
            d="M8.00065 1.3335C4.32732 1.3335 1.33398 4.32683 1.33398 8.00016C1.33398 11.6735 4.32732 14.6668 8.00065 14.6668C11.674 14.6668 14.6673 11.6735 14.6673 8.00016C14.6673 4.32683 11.674 1.3335 8.00065 1.3335ZM10.2407 9.5335C10.434 9.72683 10.434 10.0468 10.2407 10.2402C10.1407 10.3402 10.014 10.3868 9.88732 10.3868C9.76065 10.3868 9.63398 10.3402 9.53399 10.2402L8.00065 8.70683L6.46732 10.2402C6.36732 10.3402 6.24065 10.3868 6.11398 10.3868C5.98732 10.3868 5.86065 10.3402 5.76065 10.2402C5.56732 10.0468 5.56732 9.72683 5.76065 9.5335L7.29398 8.00016L5.76065 6.46683C5.56732 6.2735 5.56732 5.9535 5.76065 5.76016C5.95398 5.56683 6.27398 5.56683 6.46732 5.76016L8.00065 7.2935L9.53399 5.76016C9.72732 5.56683 10.0473 5.56683 10.2407 5.76016C10.434 5.9535 10.434 6.2735 10.2407 6.46683L8.70732 8.00016L10.2407 9.5335Z"
            fill="#86969D"
          />
        </svg>
            </div>

            <!-- To Month Picker -->
            <div class="close-icon-wrapper input-close-wrapper">
                <mat-form-field class="small-dropdown medium-height-wrapper" [ngClass]="[!toMonthControl.value || toMonthControl.errors ? 'required-error' : '', toMonthControl.value ? '' : 'calender-icon']">
                    <!-- <mat-label class="filterLabel">To</mat-label> -->
                    <input placeholder="To" [matDatepickerFilter]="myFilter" matInput [matDatepicker]="toMonthPicker" [formControl]="toMonthControl" (click)="toMonthPicker.open()" autocomplete="off" readonly />

                    <mat-datepicker-toggle matPrefix [for]="toMonthPicker"></mat-datepicker-toggle>
                    <mat-datepicker #toMonthPicker startView="multi-year" (monthSelected)="setMonthAndYear($event, toMonthPicker, 1)" panelClass="example-month-picker"></mat-datepicker>
                    <!-- <mat-icon matSuffix class="filter-close" (click)="toMonthControl.reset(); getProjectReport()" *ngIf="toMonthControl.value">close</mat-icon> -->
                </mat-form-field>
                <svg (click)="toMonthControl.reset(); getProjectReport()" *ngIf="toMonthControl.value" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="filter-close">
          <path
            d="M8.00065 1.3335C4.32732 1.3335 1.33398 4.32683 1.33398 8.00016C1.33398 11.6735 4.32732 14.6668 8.00065 14.6668C11.674 14.6668 14.6673 11.6735 14.6673 8.00016C14.6673 4.32683 11.674 1.3335 8.00065 1.3335ZM10.2407 9.5335C10.434 9.72683 10.434 10.0468 10.2407 10.2402C10.1407 10.3402 10.014 10.3868 9.88732 10.3868C9.76065 10.3868 9.63398 10.3402 9.53399 10.2402L8.00065 8.70683L6.46732 10.2402C6.36732 10.3402 6.24065 10.3868 6.11398 10.3868C5.98732 10.3868 5.86065 10.3402 5.76065 10.2402C5.56732 10.0468 5.56732 9.72683 5.76065 9.5335L7.29398 8.00016L5.76065 6.46683C5.56732 6.2735 5.56732 5.9535 5.76065 5.76016C5.95398 5.56683 6.27398 5.56683 6.46732 5.76016L8.00065 7.2935L9.53399 5.76016C9.72732 5.56683 10.0473 5.56683 10.2407 5.76016C10.434 5.9535 10.434 6.2735 10.2407 6.46683L8.70732 8.00016L10.2407 9.5335Z"
            fill="#86969D"
          />
        </svg>
            </div>
            <!-- Export Button -->

            <img src="assets/images/excel.svg" alt="draft" (click)="exportReport()" *ngIf="listDataSource.data.length > 0 && isValidSelection" class="excel" />
        </div>
        <div class="table-top table-responsive">
            <table mat-table [dataSource]="listDataSource.data.length > 0 ? listDataSource : emptyData" *ngIf="!showSpinner; else spinnerSection">
                <ng-container matColumnDef="workspaceName">
                    <th mat-header-cell *matHeaderCellDef>Workspace Name</th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.workspaceName }}
                    </td>
                </ng-container>

                <ng-container matColumnDef="projectName">
                    <th mat-header-cell *matHeaderCellDef>Project Name</th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.projectName }}
                    </td>
                </ng-container>

                <ng-container matColumnDef="totalWorkedHrs">
                    <th mat-header-cell *matHeaderCellDef>Total Worked Hrs.</th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.totalWorkedHrs }}
                    </td>
                </ng-container>

                <ng-container matColumnDef="empty-row">
                    <td mat-cell *matCellDef="let element">No records found</td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: listDataSource.data.length > 0 ? displayedColumns : ['empty-row']"></tr>
            </table>
        </div>
        <mat-paginator *ngIf="listDataSource.data.length > 0" [pageSize]="limit" [pageIndex]="page - 1" [length]="totalRecords" [pageSizeOptions]="[5, 10, 25, 100]" (page)="onPageSelectionChange($event)" aria-label="Select page of users" class="pagination" [disabled]="!isValidSelection"></mat-paginator>
    </mat-card>
</div>
<ng-template #spinnerSection>
    <div mat-row [mainAppSpinner]="showSpinner"></div>
</ng-template>